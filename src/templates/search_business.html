{% extends 'base.html' %}

{% block content %}

    <div class="progress" role="progressbar" aria-label="Default striped example" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100">
        <div class="progress-bar progress-bar-striped" style="width: 0%"></div>
    </div>
    <br/>


    {% for message in get_flashed_messages() %}
        <div class="alert alert-warning alert-dismissible fade show" role="alert">
            {{message}}
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
            </button>
        </div>
    {% endfor %}

    <!-- SEARCH BUSINESS FORM -->
     <h1>1. Search for business</h1>
    <form method="POST" action="{{ url_for('main.search_business_name') }}">
        {{ form.hidden_tag() }}
        {{ form.query.label(class="form-label") }} 
        {{ form.query(class="form-control") }}
        <br/>
        {{ form.search(class="btn btn-primary")}}
    </form>

    <br/>
    <!-- SELECT BUSINESS SECTION -->
    {% if businesses %}
        <form method="POST" action="{{ url_for('main.select_business') }}">
            {{ form.hidden_tag() }}
            <div class="list-group">
                {% for business in businesses %}
                    <button type="submit" class="list-group-item list-group-item-action"
                            name="selected_business" value="{{ business.business_id }}">
                        <span>{{ business.name }}</span> - {{ business.phone }}
                    </button>
                {% endfor %}
            </div>
            <br/>
        </form>
    {% elif request.method == 'POST' %}
        <small>No results found.</small>
        <!-- REDIRECT CREATE BUSINESS FORM -->
        <!-- <form action="{{ url_for('main.create_new_business') }}" method="get">
            <button type="submit" class="btn-sm btn-warning">Create new business</button>
        </form> -->
    {% endif %}

{% endblock %}